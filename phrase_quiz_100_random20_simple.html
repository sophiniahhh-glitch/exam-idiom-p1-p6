<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å­¸æ¸¬æ­·å±†ç‰‡èªå…‹æ¼å­—ç·´ç¿’ï¼ˆéš¨æ©Ÿ 20 é¡Œï¼‰</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7fb;
      color: #333;
    }
    .wrapper {
      max-width: 1100px;
      margin: 24px auto 32px;
      padding: 16px;
    }
    .card {
      background: #fff;
      border-radius: 16px;
      padding: 20px 22px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      border: 1px solid rgba(0,0,0,0.05);
    }
    h1 {
      margin: 0 0 4px;
      font-size: 26px;
    }
    .subtitle {
      font-size: 15px;
      color: #666;
      margin-bottom: 10px;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 14px;
      align-items: center;
    }
    button {
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 15px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }
    .primary { background: #2563eb; color: #fff; }
    .secondary { background: #e5e7eb; color: #111827; }
    .score-area {
      font-size: 16px;
      font-weight: 600;
      color: #2563eb;
      margin-left: auto;
      min-width: 150px;
      text-align: right;
    }
    hr {
      border: none;
      border-top: 1px solid #e5e7eb;
      margin: 12px 0;
    }
    .question {
      padding: 10px 10px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      margin-bottom: 8px;
    }
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
    }
    .q-number {
      font-size: 17px;
      font-weight: 700;
      color: #2563eb;
    }
    .q-tag {
      font-size: 11px;
      color: #6b7280;
      padding: 1px 6px;
      border-radius: 999px;
      background: #e5e7eb;
    }
    .q-text {
      font-size: 17px;
      line-height: 1.35;
      margin-bottom: 6px;
    }
    .options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 4px;
      margin-top: 2px;
    }
    .option-label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      background: #fff;
      border-radius: 999px;
      padding: 5px 9px;
      border: 1px solid #e5e7eb;
      font-size: 15px;
    }
    .option-label input[type="radio"] {
      transform: scale(1.1);
      accent-color: #2563eb;
    }
    #debug {
      font-size: 13px;
      color: #059669;
      margin-bottom: 6px;
    }
    #explanations {
      margin-top: 12px;
    }
    .explanation-item {
      margin-bottom: 8px;
      padding: 8px 9px;
      border-radius: 8px;
      border: 1px dashed #d1d5db;
      background: #ffffff;
      font-size: 14px;
    }
    .exp-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 2px;
    }
    .exp-title { font-weight: 600; }
    .exp-status.correct { color: #16a34a; font-weight: 600; }
    .exp-status.wrong { color: #dc2626; font-weight: 600; }
    .exp-status.missing { color: #6b7280; font-weight: 600; }
    .badge {
      display: inline-block;
      font-size: 11px;
      padding: 1px 6px;
      border-radius: 999px;
      margin-top: 3px;
      background: #e5e7eb;
      color: #374151;
    }
  </style>
</head>
<body>
<div class="wrapper">
  <div class="card">
    <h1>å­¸æ¸¬æ­·å±†ç‰‡èªå…‹æ¼å­—ç·´ç¿’</h1>
    <div class="subtitle">âœ” 100 é¡Œç‰‡èªé¡Œåº«ï¼Œæ¯æ¬¡éš¨æ©Ÿç”¢ç”Ÿ 20 é¡Œï¼Œå››é¸ä¸€ï¼Œè‡ªå‹•æ‰¹æ”¹èˆ‡è©³è§£ã€‚</div>

    <div id="debug">âœ… JavaScript å·²å•Ÿå‹•ï¼Œå¦‚æœç­‰ä¸€ä¸‹æ²’æœ‰å‡ºç¾é¡Œç›®è«‹å†å‘Šè¨´æˆ‘ã€‚</div>

    <div class="controls">
      <button class="secondary" onclick="newQuiz()">ğŸ”„ é‡æ–°æŠ½é¡Œ</button>
      <button class="primary" onclick="gradeQuiz()">âœ… äº¤å·æ‰¹æ”¹</button>
      <div class="score-area" id="score-area">å°šæœªä½œç­”</div>
    </div>

    <hr>

    <div id="questions"></div>
    <div id="explanations"></div>
  </div>
</div>

<script>
  // ç‰‡èªå­—å…¸
  var phraseDict = {
    "in no time": "é¦¬ä¸Šï¼›ç«‹åˆ»",
    "by all means": "ç•¶ç„¶å¯ä»¥ï¼›è«‹å„˜ç®¡",
    "get over": "å…‹æœï¼›æ¢å¾©å¸¸æ…‹",
    "compete for": "ç‚ºâ€¦è€Œç«¶çˆ­ï¼›çˆ­å¥ª",
    "give way to": "è®“è·¯çµ¦ï¼›è®“ä½æ–¼ï¼›å‘â€¦å±ˆæœ",
    "make up for": "å½Œè£œï¼›è£œå„Ÿ",
    "free of": "æ²’æœ‰â€¦ï¼›å…æ–¼â€¦",
    "long before": "æ—©åœ¨â€¦ä¹‹å‰",
    "vary with": "éš¨â€¦è€Œè®Š",
    "bring about": "é€ æˆï¼›å¼•èµ·",
    "be accompanied by": "ç”±â€¦é™ªåŒï¼›ä¼´éš¨",
    "pass through": "é€šéï¼›ç¶“é",
    "reach for": "ä¼¸æ‰‹å»æ‹¿",
    "contrary to": "èˆ‡â€¦ç›¸å",
    "except for": "é™¤äº†â€¦ä¹‹å¤–",
    "more of": "æ›´åƒæ˜¯â€¦ï¼›èˆ‡å…¶èªªæ˜¯â€¦ä¸å¦‚èªªæ˜¯â€¦",
    "other than": "è€Œä¸æ˜¯â€¦ï¼›é™¤â€¦ä¹‹å¤–",
    "call for": "éœ€è¦ï¼›å€¼å¾—ï¼›å‘¼ç±²",
    "try out for": "åƒåŠ ï¼ˆéšŠä¼ï¼åŠ‡çµ„ï¼‰é¸æ‹”",
    "set up": "è¨­ç½®ï¼›å»ºç«‹",
    "hang on": "ç­‰ä¸€ä¸‹ï¼›ç¨å€™",
    "take over": "æ¥ç®¡ï¼›ç¹¼ä»»",
    "break down": "æ•…éšœï¼›åˆ†è§£ï¼›å´©æ½°",
    "come after": "è¿½è¶•ï¼›è¿½è¨",
    "hold on to": "æŠ“ä½ï¼›ç·Šæ¡ï¼›åŸ·è‘—æ–¼",
    "watch out for": "ç•™æ„ï¼›å°å¿ƒ",
    "be carried away by": "è¢«â€¦æ²–æ˜é ­ï¼›å› â€¦å¿˜å½¢",
    "build on": "å»ºç«‹åœ¨â€¦ä¹‹ä¸Š",
    "cope with": "è™•ç†ï¼›æ‡‰ä»˜",
    "get off": "é›¢é–‹ï¼›ä¸‹è»Šï¼›å‡ºç™¼",
    "as a result of": "ç”±æ–¼ï¼›å› ç‚º",
    "in a search for": "åœ¨å°‹æ‰¾â€¦",
    "with a view to": "ç‚ºäº†â€¦ç›®çš„ï¼›æ„åœ¨â€¦",
    "to the extent of": "åˆ°äº†â€¦çš„ç¨‹åº¦",
    "shoot out": "å°„å‡ºï¼›ä¼¸å‡º",
    "hold on": "ç­‰ä¸€ä¸‹ï¼›å …æŒä½",
    "come across": "å¶ç„¶é‡è¦‹ï¼›ç¢°åˆ°",
    "give up": "æ”¾æ£„",
    "as for": "è‡³æ–¼",
    "owing to": "å› ç‚ºï¼›ç”±æ–¼",
    "in spite of": "å„˜ç®¡",
    "with respect to": "é—œæ–¼ï¼›å°±â€¦è€Œè¨€",
    "mix up": "æ··åˆï¼›ææ··",
    "tear off": "æ’•æ‰ï¼›æ‰¯æ‰",
    "result in": "å°è‡´ï¼›é€ æˆ",
    "lead to": "å°è‡´ï¼›å¼•èµ·",
    "bring out": "ä½¿å‡ºç¾ï¼›é¡¯ç¾",
    "stem from": "æºè‡ªï¼›èµ·å› æ–¼",
    "come to an end": "çµæŸï¼›çµ‚æ­¢",
    "go to great lengths": "ç«­ç›¡å…¨åŠ›ï¼›ä¸éºé¤˜åŠ›",
    "put in service": "æŠ•å…¥ä½¿ç”¨ï¼›å•Ÿç”¨",
    "hold in store": "å„²å­˜ï¼›ç­‰å¾…ï¼ˆå°‡ä¾†ï¼‰",
    "bring along": "å¸¶â€¦ä¸€èµ·ä¾†",
    "turn out": "çµæœæ˜¯ï¼›è­‰æ˜æ˜¯",
    "account for": "ä½”ï¼ˆæ•¸é‡ï¼‰ï¼›è§£é‡‹",
    "serve as": "å……ç•¶ï¼›æ“”ä»»",
    "due to": "ç”±æ–¼ï¼›å› ç‚º",
    "nothing but": "åªæ˜¯ï¼›åªæœ‰",
    "in contrast to": "èˆ‡â€¦ç›¸å",
    "on behalf of": "ä»£è¡¨",
    "refer to": "æåˆ°ï¼›åƒè€ƒ",
    "answer for": "å°â€¦è² è²¬",
    "take part in": "åƒåŠ ï¼›å‡ºå¸­",
    "put up with": "å®¹å¿ï¼›å¿å—",
    "get away with": "åšâ€¦è€Œæœªè¢«æ‡²ç½°",
    "clean up after": "å–„å¾Œï¼›æ”¶æ‹¾â€¦ç•™ä¸‹çš„çˆ›æ”¤å­",
    "run out of": "ç”¨å®Œï¼›è€—ç›¡",
    "look down upon": "è¼•è¦–ï¼›çœ‹ä¸èµ·",
    "related to": "èˆ‡â€¦ç›¸é—œ",
    "aside from": "é™¤æ­¤ä¹‹å¤–ï¼›é™¤äº†â€¦ä¹‹å¤–",
    "more than": "è¶…éï¼›æ¯”â€¦æ›´å¤šï¼›ä¸åªæ˜¯",
    "in other words": "æ›å¥è©±èªª",
    "by no means": "çµ•ä¸ï¼›ä¸€é»ä¹Ÿä¸",
    "at any cost": "ä¸æƒœä»»ä½•ä»£åƒ¹ï¼›ç„¡è«–å¦‚ä½•",
    "such as": "ä¾‹å¦‚",
    "regardless of": "ä¸é¡§ï¼›ä¸ç®¡",
    "check out": "å»çœ‹çœ‹ï¼›æª¢æŸ¥",
    "look into": "èª¿æŸ¥ï¼›ç ”ç©¶",
    "watch over": "ç…§é¡§ï¼›çœ‹å®ˆ",
    "see through": "çœ‹ç©¿ï¼›è­˜ç ´",
    "be provided with": "è¢«æä¾›â€¦",
    "far from": "é é ä¸ï¼›ä¸€é»ä¹Ÿä¸",
    "let alone": "æ›´ä¸ç”¨èªª",
    "get done": "å®Œæˆï¼›åšå®Œ",
    "get lost": "æ»¾é–‹ï¼›èµ°é–‹",
    "make do": "æ¹Šåˆè‘—ç”¨ï¼›å°‡å°±",
    "make believe": "å‡è£",
    "at most": "è‡³å¤šï¼›æœ€å¤š",
    "in contrast": "ç›¸è¼ƒä¹‹ä¸‹ï¼›ç›¸ååœ°",
    "out of": "åœ¨â€¦ä¹‹å¤–ï¼›ç¼ºä¹",
    "as well as": "ä»¥åŠï¼›å’Œâ€¦ä¸€æ¨£",
    "in case of": "ä»¥é˜²ï¼›è¬ä¸€ç™¼ç”Ÿâ€¦æ™‚",
    "break off": "ä¸­æ–·ï¼›çµ‚æ­¢",
    "approve of": "è´Šæˆï¼›åŒæ„",
    "engage in": "å¾äº‹ï¼›åƒèˆ‡",
    "get along": "ç›¸è™•èæ´½",
    "feel like": "æƒ³è¦â€¦ï¼›æƒ³åšâ€¦",
    "get rid of": "æ“ºè„«ï¼›å»é™¤",
    "make fun of": "å–ç¬‘ï¼›å˜²å¼„",
    "take advantage of": "åˆ©ç”¨ï¼›ä½”ä¾¿å®œ"
  };

  // 100 é¡Œé¡Œåº«
  var allQuestions = [
    { id: 1, text: "You can order things on our website and we will deliver them to you ____.", answer: "in no time" },
    { id: 2, text: "Do you mind if I invite a few friends? â€œ____.â€", answer: "by all means" },
    { id: 3, text: "It took Mary a long time to ____ her ex.", answer: "get over" },
    { id: 4, text: "Ten teams will ____ one spot to advance to the Koshien.", answer: "compete for" },
    { id: 5, text: "You have to ____ the ambulance.", answer: "give way to" },
    { id: 6, text: "The volleyball playerâ€™s insane vertical jump ____ his height.", answer: "make up for" },
    { id: 7, text: "The article is ____ grammar errors after a few revisions.", answer: "free of" },
    { id: 8, text: "The artist had been making rock and roll music ____ it became mainstream.", answer: "long before" },
    { id: 9, text: "Average income ____ age, occupation, and industry.", answer: "vary with" },
    { id: 10, text: "Covid ____ a lot of changes in our society.", answer: "bring about" },
    { id: 11, text: "The movie star was ____ his bodyguards at the public event.", answer: "be accompanied by" },
    { id: 12, text: "I ____ the tea shop the other day and found they were selling ice cream.", answer: "pass through" },
    { id: 13, text: "He stopped the car and ____ the gun in his glove compartment.", answer: "reach for" },
    { id: 14, text: "____ the popular belief, the author believes that vulnerability is a strength.", answer: "contrary to" },
    { id: 15, text: "This place is quite cozy ____ the smell.", answer: "except for" },
    { id: 16, text: "She is ____ an introvert than an extrovert.", answer: "more of" },
    { id: 17, text: "The round windows were designed for reasons ____ aesthetics.", answer: "other than" },
    { id: 18, text: "The job does not ____ highly skilled people.", answer: "call for" },
    { id: 19, text: "Jason ____ the baseball team, but he didnâ€™t make the cut.", answer: "try out for" },
    { id: 20, text: "Could you please help me ____ the printer?", answer: "set up" },
    { id: 21, text: "____ a second, let me go check.", answer: "hang on" },
    { id: 22, text: "Kellyâ€™s son will ____ the shop after she retires.", answer: "take over" },
    { id: 23, text: "I was late because my car ____ on the way.", answer: "break down" },
    { id: 24, text: "Jack will be ____ me if I donâ€™t return the money next week.", answer: "come after" },
    { id: 25, text: "There is no point in ____ someone who doesnâ€™t care about you.", answer: "hold on to" },
    { id: 26, text: "____ pickpockets when youâ€™re in a crowd.", answer: "watch out for" },
    { id: 27, text: "He always reminds himself not to be ____ success.", answer: "be carried away by" },
    { id: 28, text: "Success is ____ good daily habits.", answer: "build on" },
    { id: 29, text: "Jack found it difficult to ____ two babies at the same time.", answer: "cope with" },
    { id: 30, text: "We should ____ by 8:00 so that we can catch our flight home.", answer: "get off" },
    { id: 31, text: "____ the typhoon, the flight is canceled.", answer: "as a result of" },
    { id: 32, text: "The police officer is ____ the missing watch.", answer: "in a search for" },
    { id: 33, text: "He studied English hard ____ mastering it quickly.", answer: "with a view to" },
    { id: 34, text: "Bill loves Ann ____ being willing to die for her.", answer: "to the extent of" },
    { id: 35, text: "A frog can ____ its tongue, capture an insect, and pull it back.", answer: "shoot out" },
    { id: 36, text: "____! Let me check my schedule.", answer: "hold on" },
    { id: 37, text: "I ____ my ex on Tinder yesterday.", answer: "come across" },
    { id: 38, text: "Most of the students ____ after they have failed the test several times.", answer: "give up" },
    { id: 39, text: "____ my past, Iâ€™m not telling you anything.", answer: "as for" },
    { id: 40, text: "____ his health problems, John quit his job last month.", answer: "owing to" },
    { id: 41, text: "She goes to work ____ her back pain.", answer: "in spite of" },
    { id: 42, text: "Itâ€™s going to raise problems ____ water pollution.", answer: "with respect to" },
    { id: 43, text: "Have you ____ the eggs and the sugar yet?", answer: "mix up" },
    { id: 44, text: "The tiger ____ the boyâ€™s arm.", answer: "tear off" },
    { id: 45, text: "The dispute between the two countries ____ war.", answer: "result in" },
    { id: 46, text: "Smoking ____ bad breath and stained teeth.", answer: "lead to" },
    { id: 47, text: "Natural disasters can ____ the worst in people.", answer: "bring out" },
    { id: 48, text: "A lot of relationship issues ____ financial problems.", answer: "stem from" },
    { id: 49, text: "All good things ____.", answer: "come to an end" },
    { id: 50, text: "We ____ to make sure you are always comfortable in our hotel.", answer: "go to great lengths" },
    { id: 51, text: "The warranty starts when the car is ____.", answer: "put in service" },
    { id: 52, text: "Whatever life ____ me, I will never forget these words.", answer: "hold in store" },
    { id: 53, text: "Please ____ your family to the party tonight.", answer: "bring along" },
    { id: 54, text: "The ticket I bought online ____ to be a scam.", answer: "turn out" },
    { id: 55, text: "African-Americans ____ about 12% of the US population.", answer: "account for" },
    { id: 56, text: "The box will ____ a table for now.", answer: "serve as" },
    { id: 57, text: "The match was cancelled ____ the rain.", answer: "due to" },
    { id: 58, text: "They did ____ argue for two weeks.", answer: "nothing but" },
    { id: 59, text: "____ his brothers, Tom is rather short.", answer: "in contrast to" },
    { id: 60, text: "The lawyer spoke ____ his client.", answer: "on behalf of" },
    { id: 61, text: "The teacher begins the class by ____ a fairytale.", answer: "refer to" },
    { id: 62, text: "The coach must ____ the teamâ€™s poor performance.", answer: "answer for" },
    { id: 63, text: "Bob refused to ____ the meeting.", answer: "take part in" },
    { id: 64, text: "I canâ€™t ____ the childrenâ€™s noise anymore.", answer: "put up with" },
    { id: 65, text: "The man ____ the robbery and fled to Mexico.", answer: "get away with" },
    { id: 66, text: "You are an adult. You should learn to ____ yourself.", answer: "clean up after" },
    { id: 67, text: "He ____ toilet paper, so he used the newspaper instead.", answer: "run out of" },
    { id: 68, text: "We tend to subconsciously ____ people who make less money than us.", answer: "look down upon" },
    { id: 69, text: "Most of the popular posts are ____ study methods.", answer: "related to" },
    { id: 70, text: "____ cartoons, I also love watching movies.", answer: "aside from" },
    { id: 71, text: "John loves his car ____ anything else.", answer: "more than" },
    { id: 72, text: "I have to take a bath now. ____, she doesnâ€™t want to talk to you.", answer: "in other words" },
    { id: 73, text: "He is ____ stupid. He was just playing dumb.", answer: "by no means" },
    { id: 74, text: "Dave wanted to save his son ____ , even at the risk of his own life.", answer: "at any cost" },
    { id: 75, text: "The money is used to buy basic foods ____ flour, rice, and pasta.", answer: "such as" },
    { id: 76, text: "Jane married Will ____ her parentsâ€™ objections.", answer: "regardless of" },
    { id: 77, text: "You can ____ our website for more information.", answer: "check out" },
    { id: 78, text: "The police said they would ____ my case, but they didnâ€™t call me back.", answer: "look into" },
    { id: 79, text: "Sandyâ€™s father is home during the day so he can ____ the kids.", answer: "watch over" },
    { id: 80, text: "Everyone here can ____ his lies. He is not fooling anyone.", answer: "see through" },
    { id: 81, text: "Many kids are not ____ proper education.", answer: "be provided with" },
    { id: 82, text: "We finished the project on time, but the boss was ____ satisfied.", answer: "far from" },
    { id: 83, text: "She doesnâ€™t want to chat with you online, ____ going out with you.", answer: "let alone" },
    { id: 84, text: "The report has to ____ by the deadline.", answer: "get done" },
    { id: 85, text: "I wonâ€™t buy anything from you, so ____!", answer: "get lost" },
    { id: 86, text: "I have to ____ with boxes before I buy a new desk.", answer: "make do" },
    { id: 87, text: "He put on a cloak and ____ he was a superhero.", answer: "make believe" },
    { id: 88, text: "Our supply can last seven days ____.", answer: "at most" },
    { id: 89, text: "Tim is tall. ____, his brother is short.", answer: "in contrast" },
    { id: 90, text: "He threw a party when his parents were ____ town.", answer: "out of" },
    { id: 91, text: "Tom, ____ his brother, is an outstanding athlete.", answer: "as well as" },
    { id: 92, text: "She took an umbrella ____ rain.", answer: "in case of" },
    { id: 93, text: "Frank wants to ____ his relationship with Gina.", answer: "break off" },
    { id: 94, text: "Peterâ€™s boss doesnâ€™t ____ his plan.", answer: "approve of" },
    { id: 95, text: "The company is ____ illegal activities.", answer: "engage in" },
    { id: 96, text: "I canâ€™t ____ with my neighbors.", answer: "get along" },
    { id: 97, text: "I donâ€™t ____ going out today.", answer: "feel like" },
    { id: 98, text: "He tried very hard to ____ the cigarette smell on his fingers.", answer: "get rid of" },
    { id: 99, text: "Donâ€™t ____ peopleâ€™s accents when theyâ€™re trying to speak a foreign language.", answer: "make fun of" },
    { id: 100, text: "If you want to learn somethingæ–°, you can ____ resources on the Internet.", answer: "take advantage of" }
  ];

  function shuffle(arr) {
    for (var i = arr.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var tmp = arr[i];
      arr[i] = arr[j];
      arr[j] = tmp;
    }
    return arr;
  }

  function pickRandomOptions(correct) {
    var allPhrases = Object.keys(phraseDict);
    var pool = [];
    for (var i = 0; i < allPhrases.length; i++) {
      if (allPhrases[i] !== correct) pool.push(allPhrases[i]);
    }
    shuffle(pool);
    var distractors = pool.slice(0, 3);
    var options = [correct].concat(distractors);
    shuffle(options);
    return options;
  }

  var currentQuestions = [];
  var currentOptionsMap = {};

  function newQuiz() {
    var copied = allQuestions.slice();
    shuffle(copied);
    currentQuestions = copied.slice(0, 20);
    renderQuestions();
  }

  function renderQuestions() {
    var container = document.getElementById("questions");
    container.innerHTML = "";
    currentOptionsMap = {};
    for (var i = 0; i < currentQuestions.length; i++) {
      var q = currentQuestions[i];
      var qDiv = document.createElement("div");
      qDiv.className = "question";

      var header = document.createElement("div");
      header.className = "question-header";
      var numSpan = document.createElement("span");
      numSpan.className = "q-number";
      numSpan.textContent = "Q" + (i + 1);
      var tagSpan = document.createElement("span");
      tagSpan.className = "q-tag";
      tagSpan.textContent = "ç‰‡èªå…‹æ¼å­—";
      header.appendChild(numSpan);
      header.appendChild(tagSpan);

      var textDiv = document.createElement("div");
      textDiv.className = "q-text";
      textDiv.textContent = q.text;

      var optionsDiv = document.createElement("div");
      optionsDiv.className = "options";

      var opts = pickRandomOptions(q.answer);
      currentOptionsMap[q.id] = opts;

      for (var k = 0; k < opts.length; k++) {
        var opt = opts[k];
        var label = document.createElement("label");
        label.className = "option-label";

        var input = document.createElement("input");
        input.type = "radio";
        input.name = "q" + q.id;
        input.value = opt;

        var span = document.createElement("span");
        span.textContent = opt;

        label.appendChild(input);
        label.appendChild(span);
        optionsDiv.appendChild(label);
      }

      qDiv.appendChild(header);
      qDiv.appendChild(textDiv);
      qDiv.appendChild(optionsDiv);
      container.appendChild(qDiv);
    }
    document.getElementById("explanations").innerHTML = "";
    document.getElementById("score-area").textContent = "å°šæœªä½œç­”";
  }

  function gradeQuiz() {
    if (!currentQuestions || currentQuestions.length === 0) return;
    var correctCount = 0;
    var explanationsDiv = document.getElementById("explanations");
    explanationsDiv.innerHTML = "";

    for (var i = 0; i < currentQuestions.length; i++) {
      var q = currentQuestions[i];
      var selected = document.querySelector('input[name="q' + q.id + '"]:checked');
      var userAns = selected ? selected.value : null;
      var isCorrect = (userAns === q.answer);
      if (isCorrect) correctCount++;

      var expItem = document.createElement("div");
      expItem.className = "explanation-item";

      var header = document.createElement("div");
      header.className = "exp-header";

      var title = document.createElement("div");
      title.className = "exp-title";
      title.textContent = "Q" + (i + 1) + " è§£ç­”";

      var status = document.createElement("div");
      status.className = "exp-status";
      if (!userAns) {
        status.textContent = "æœªä½œç­”";
        status.className += " missing";
      } else if (isCorrect) {
        status.textContent = "ç­”å° âœ…";
        status.className += " correct";
      } else {
        status.textContent = "ç­”éŒ¯ âŒ";
        status.className += " wrong";
      }

      header.appendChild(title);
      header.appendChild(status);

      var lineSentence = document.createElement("div");
      lineSentence.textContent = q.text.replace("____", q.answer);

      var lineCorrect = document.createElement("div");
      var zhCorrect = phraseDict[q.answer] || "";
      lineCorrect.textContent = "æ­£ç¢ºç‰‡èªï¼š" + q.answer + "ï¼ˆ" + zhCorrect + "ï¼‰";

      var lineUser = document.createElement("div");
      if (!userAns) {
        lineUser.textContent = "ä½ çš„ä½œç­”ï¼šæœªé¸æ“‡ã€‚";
      } else {
        var zhUser = phraseDict[userAns] || "";
        lineUser.textContent = "ä½ çš„ä½œç­”ï¼š" + userAns + "ï¼ˆ" + zhUser + "ï¼‰";
      }

      var badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = "å››å€‹é¸é …çš„ä¸­æ–‡èˆ‡èªªæ˜";

      var optsList = document.createElement("div");
      var opts = currentOptionsMap[q.id] || [];
      var listText = "";
      for (var j = 0; j < opts.length; j++) {
        var o = opts[j];
        var zh = phraseDict[o] || "";
        var mark = (o === q.answer) ? "â­" : "â€¢";
        listText += mark + " " + o + "ï¼š" + zh;
        if (j !== opts.length - 1) listText += "\n";
      }
      optsList.textContent = listText;

      expItem.appendChild(header);
      expItem.appendChild(lineSentence);
      expItem.appendChild(lineCorrect);
      expItem.appendChild(lineUser);
      expItem.appendChild(badge);
      expItem.appendChild(optsList);
      explanationsDiv.appendChild(expItem);
    }

    document.getElementById("score-area").textContent =
      "å¾—åˆ†ï¼š" + correctCount + " / " + currentQuestions.length;
  }

  // é é¢è¼‰å…¥å®Œæˆå°±è‡ªå‹•æŠ½ 20 é¡Œ
  window.onload = function() {
    newQuiz();
  };
</script>
</body>
</html>
